


<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Treemap</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>

 <script src="http://d3js.org/d3.v3.min.js"></script>

    <style>
    .cell {
  border: solid 1px white;
  font: 20px sans-serif;
  line-height: 12px;
  overflow: hidden;
  position: absolute;
  text-indent: 20px;
  text-align:center;
  vertical-align:middle;
  top:50%;
  line-height:2em;
  color:grey;
  opacity:1.0;

}
</style>

  </head>
  <body>
    <div id="chart">

    </div>

<script>
var w = 960,
h = 500
var d3_category20 = [
"#1f77b4", "#aec7e8",
"#ff7f0e", "#ffbb78",
"#2ca02c", "#98df8a",
"#d62728", "#ff9896",
"#9467bd", "#c5b0d5",
"#8c564b", "#c49c94",
"#e377c2", "#f7b6d2",
"#7f7f7f", "#c7c7c7",
"#bcbd22", "#dbdb8d",
"#17becf", "#9edae5"
];

var treemap = d3.layout.treemap()
.size([w, h])
.sticky(true)
.mode("squarify")
.value(function(d) { return d.size; });

var div = d3.select("#chart")
.style("position", "relative")
.style("width", w + "px")
.style("height", h + "px")
.style("border", "1px solid grey");

console.log("hi")

domains=[
  {name:"asdf", size:80, children:[], mid:"/en/radiohead"},
  {name:"ff", size:280, children:[], mid:"/en/toronto"},
  {name:"ss", size:380, children:[], mid:"/en/london"},
  {name:"dd", size:80, children:[], mid:"/en/miami"},
  {name:"ff", size:150, children:[], mid:"/en/paris"},
  {name:"cc", size:80, children:[], mid:"/en/tony_hawk"},
  {name:"ff", size:90, children:[], mid:"/en/thom_yorke"},
  {name:"ff", size:150, children:[], mid:"/en/paris"},
  {name:"cc", size:80, children:[], mid:"/en/tony_hawk"},
  {name:"ff", size:90, children:[], mid:"/en/thom_yorke"},
  {name:"cc", size:180, children:[], mid:"/en/canada"},
]


  var json={
    "name": "flare",
    "children": domains
  }

  div.selectAll("div").data(treemap(json))
  .enter().append("div")
  .attr("class", "cell")
  .style("background", function(d,i) { return d3_category20[i]; })
  .style("background-image", function(d,i) { return "url('https://www.googleapis.com/freebase/v1/image"+d.mid+"?maxwidth=275&maxheight=275&mode=fillcropmid&errorid=/m/0djw4wd&key=AIzaSyD5GmnQC7oW9GJIWPGsJUojspMMuPusAxI')" })
  .style("left", function(d) { return d.x + "px"; })
  .style("top", function(d) { return d.y + "px"; })
  .style("width", function(d) { return d.dx - 1 + "px"; })
  .style("height", function(d) { return d.dy - 1 + "px"; })
  .style("overflow", "hidden")
  .style("background-position", "5% 5%")
  .transition().duration(5200)
  .style("background-position", "25% 75%")
  .transition().duration(5200)
  .style("background-position", "25% 25%")



</script>
  </body>
</html>
